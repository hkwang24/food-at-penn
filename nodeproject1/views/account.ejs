<!--
  HTML for Accounts page.
  @developer: Robin and Hannah
!-->

<!DOCTYPE html>
<html>

  <head>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>

  <body>
    <style>
      .paper {
        background-color: #f7f7f7;
        margin-top: 10px;
        margin-left: 15%;
        margin-right: 15%;
        padding: 30px;
        border-radius: 5px;
      }
      
      .paper-header {
        text-align: center;
        font-size: 200%;
        font-weight: bold;
      }

      .paper-section {
        font-size: 150%;
        font-weight: bold;
        margin-bottom: 10px;
      }
    </style>

    <h1>Welcome, <%= userFirstName %>!</h1>

    <div class="paper">
      <div class="paper-header">
        <%= userFirstName %>'s Profile Snapshot
      </div>
      <div class="ui grid four wide column">
        <div class="paper-section">
          Name:
          <div style="font-weight: normal; display: inline-block">
            <%= userFirstName %> <%= userLastName %>
          </div>
        </div>

        <div class="paper-section">
          Email:
          <div style="font-weight: normal; display: inline-block">
            <%= userEmail %>
          </div>
        </div>

        <div class="paper-section">
          Phone Number:
          <div style="font-weight: normal; display: inline-block">
            <%= userPhone %>
          </div>
        </div>

        <div class="paper-section">
          Penn School:
          <div style="font-weight: normal; display: inline-block">
            <%= userSchool %>
          </div>
        </div>

        <div class="paper-section">
          Graduation Year:
          <div style="font-weight: normal; display: inline-block">
            <%= userYear %>
          </div>
        </div>
      </div>
    </div>

    <!--
      List of posts for the logged-in user
      Made default message if there are no current posts
      @developer: Robin
	  
      Add link for redirection to data visualizations
      @developer: Hannah
    !-->
    <div class="paper" id="postsContainer">
      <h2>Your posts</h2>
      <%
        var list = '';
        var noPosts = true;
        for (i = 0; i < posts.length; i++) {
          if (posts[i].user == user) {
            noPosts = false;
            list += '<li>' + 
                        'Post ID: ' + i.toString() + '<br>' + 
                        'Weekday: ' + posts[i].weekday + '<br>' + 
                        'Time: ' + posts[i].time + '<br>' + 
                        'Food type: ' + posts[i].food + '<br>' +
                        'Location: ' + posts[i].location + '<br>' + 
                        '</li><br>';
          }     
        } 
        if (noPosts) {
          list = '<h3>No posts made yet!</h3>';
        }
      %>
      
      <ol> <%- list %> </ol>

    </div>

    <br><br>

    <!-- Upon clicking "Filter Searches",
      Displays the posts based on the keywords contained in the selected dropdown value
      @developer: Robin
    -->
    <div style="display: inline-block">
      <select id="selectionDropdown">
        <option value="weekday">Weekday</option>
        <option value="time">Time</option>
        <option value="food">Food</option>
        <option value="location">Location</option>
      </select>
      <input id="keywordField" type="text" placeholder="Keyword" name="keywordField" style="margin-left: 100%" />
      <button id="filterButton" style="margin-left: 15%">
        Filter Searches
      </button>
      <script>
          document.getElementById("filterButton").onclick = function () {
              var selection = parseInt($("#selectionDropdown :selected").val());
              var postsContainer = document.getElementById("postsContainer");
              // Clears postsContainer
              while(postsContainer.firstChild){
                postsContainer.removeChild(postsContainer.firstChild);
              }
              var html = ''
              }
          };
      </script>
    </div>

    <br>

    <div style="color:white; float: left; margin-left: 15%" class="nav navbar-nav">
      <a href="/graphs">
        See Data Visualizations
      </a>
    </div>

  </body>

</html>